

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Enabling Elasticsearch on the local server &mdash; Read the Docs 1.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Local VM Install" href="local_rtd_vm.html" />
    <link rel="prev" title="Customizing your install" href="customization.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/logo.svg" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">User Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versions.html">Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../builds.html">Build Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features.html">Read the Docs features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support.html">Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../yaml-config.html">Read the Docs YAML Config</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guides/index.html">Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">Public API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../embed.html">Embed API</a></li>
</ul>
<p class="caption"><span class="caption-text">About Read the Docs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contribute.html">Contributing to Read the Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../team.html">Read the Docs Team</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gsoc.html">Google Summer of Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../code-of-conduct.html">Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../privacy-policy.html">Privacy Policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advertising/index.html">Advertising</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sponsors.html">Sponsors of Read the Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../open-source-philosophy.html">Read the Docs Open Source Philosophy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../story.html">The Story of Read the Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../abandoned-projects.html">Policy for Abandoned Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dmca/index.html">DMCA Takedown Policy</a></li>
</ul>
<p class="caption"><span class="caption-text">Feature Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../webhooks.html">Webhooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../badges.html">Badges</a></li>
<li class="toctree-l1"><a class="reference internal" href="../alternate_domains.html">Alternate Domains</a></li>
<li class="toctree-l1"><a class="reference internal" href="../localization.html">Localization of Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vcs.html">Version Control System Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../subprojects.html">Subprojects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../conda.html">Conda Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../canonical.html">Canonical URLs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../single_version.html">Single Version Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../privacy.html">Privacy Levels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user-defined-redirects.html">User-defined Redirects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../automatic-redirects.html">Automatic Redirects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/embed.html">Content Embedding</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tests.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docs.html">Building and Contributing to Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/standards.html">Front End Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/buildenvironments.html">Build Environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../symlinks.html">How we use symlinks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../settings.html">Interesting Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../i18n.html">Internationalization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../issue-labels.html">Overview of issue labels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">Security</a></li>
</ul>
<p class="caption"><span class="caption-text">Business Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../business/index.html">Read the Docs Business Features</a></li>
</ul>
<p class="caption"><span class="caption-text">Custom Install Documentation</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Info about custom installs</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="customization.html">Customizing your install</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Enabling Elasticsearch on the local server</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#installing-java">Installing Java</a></li>
<li class="toctree-l3"><a class="reference internal" href="#downloading-and-installing-elasticsearch">Downloading and installing Elasticsearch</a></li>
<li class="toctree-l3"><a class="reference internal" href="#custom-setup">Custom setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-elasticsearch-from-command-line">Running Elasticsearch from command line</a></li>
<li class="toctree-l3"><a class="reference internal" href="#index-the-data-available-at-rtd-database">Index the data available at RTD database</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="local_rtd_vm.html">Local VM Install</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Designer Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../design.html">Designing Read the Docs</a></li>
<li class="toctree-l1"><a class="reference external" href="https://sphinx-rtd-theme.readthedocs.io/en/latest/">Theme</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Read the Docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Info about custom installs</a> &raquo;</li>
        
      <li>Enabling Elasticsearch on the local server</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/custom_installs/elasticsearch.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="enabling-elasticsearch-on-the-local-server">
<h1>Enabling Elasticsearch on the local server<a class="headerlink" href="#enabling-elasticsearch-on-the-local-server" title="Permalink to this headline">¶</a></h1>
<p>Read the Docs has been using Elasticsearch for indexing and searching. To enable this on your local installation, you need to install elasticsearch and run the Elastic server locally.</p>
<p>Installation has been mainly divided into following steps.</p>
<div class="section" id="installing-java">
<h2>Installing Java<a class="headerlink" href="#installing-java" title="Permalink to this headline">¶</a></h2>
<p>Elasticsearch requires Java 8 or later. Use <a class="reference external" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Oracle official documentation</a>.
or opensource distribution like <a class="reference external" href="http://openjdk.java.net/install/">OpenJDK</a>.</p>
<p>After installing java, verify the installation by,:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ java -version
</pre></div>
</div>
<p>The result should be something like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">openjdk</span> <span class="n">version</span> <span class="s2">&quot;1.8.0_151&quot;</span>
<span class="n">OpenJDK</span> <span class="n">Runtime</span> <span class="n">Environment</span> <span class="p">(</span><span class="n">build</span> <span class="mf">1.8</span><span class="o">.</span><span class="mi">0</span><span class="n">_151</span><span class="o">-</span><span class="mi">8</span><span class="n">u151</span><span class="o">-</span><span class="n">b12</span><span class="o">-</span><span class="mi">0</span><span class="n">ubuntu0</span><span class="o">.</span><span class="mf">16.04</span><span class="o">.</span><span class="mi">2</span><span class="o">-</span><span class="n">b12</span><span class="p">)</span>
<span class="n">OpenJDK</span> <span class="mi">64</span><span class="o">-</span><span class="n">Bit</span> <span class="n">Server</span> <span class="n">VM</span> <span class="p">(</span><span class="n">build</span> <span class="mf">25.151</span><span class="o">-</span><span class="n">b12</span><span class="p">,</span> <span class="n">mixed</span> <span class="n">mode</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="downloading-and-installing-elasticsearch">
<h2>Downloading and installing Elasticsearch<a class="headerlink" href="#downloading-and-installing-elasticsearch" title="Permalink to this headline">¶</a></h2>
<p>Elasticsearch can be downloaded directly from elastic.co. For Ubuntu, it’s best to use the deb (Debian) package which will install everything you need to run Elasticsearch.</p>
<p>RTD currently uses elasticsearch 1.x which can be easily downloaded and installed from <a class="reference external" href="https://www.elastic.co/downloads/past-releases/elasticsearch-1-3-8/">elastic.co</a>.</p>
<p>Install the downloaded package by following command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo apt install .{path-to-downloaded-file}/elasticsearch-1.3.8.deb
</pre></div>
</div>
</div>
<div class="section" id="custom-setup">
<h2>Custom setup<a class="headerlink" href="#custom-setup" title="Permalink to this headline">¶</a></h2>
<p>You need the icu plugin:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ elasticsearch/bin/plugin -install elasticsearch/elasticsearch-analysis-icu/2.3.0
</pre></div>
</div>
</div>
<div class="section" id="running-elasticsearch-from-command-line">
<h2>Running Elasticsearch from command line<a class="headerlink" href="#running-elasticsearch-from-command-line" title="Permalink to this headline">¶</a></h2>
<p>Elasticsearch is not started automatically after installation. How to start and stop Elasticsearch depends on whether your system uses SysV init or systemd (used by newer distributions). You can tell which is being used by running this command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ ps -p 1
</pre></div>
</div>
<p><strong>Running Elasticsearch with SysV init</strong></p>
<p>Use the <code class="docutils literal notranslate"><span class="pre">update-rc.d</span> <span class="pre">command</span></code> to configure Elasticsearch to start automatically when the system boots up:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo update-rc.d elasticsearch defaults 95 10
</pre></div>
</div>
<p>Elasticsearch can be started and stopped using the service command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo -i service elasticsearch start
$ sudo -i service elasticsearch stop
</pre></div>
</div>
<p>If Elasticsearch fails to start for any reason, it will print the reason for failure to STDOUT. Log files can be found in /var/log/elasticsearch/.</p>
<p><strong>Running Elasticsearch with systemd</strong></p>
<p>To configure Elasticsearch to start automatically when the system boots up, run the following commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo /bin/systemctl daemon-reload
$ sudo /bin/systemctl enable elasticsearch.service
</pre></div>
</div>
<p>Elasticsearch can be started and stopped as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sudo systemctl start elasticsearch.service
$ sudo systemctl stop elasticsearch.service
</pre></div>
</div>
<p>To verify run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ curl http://localhost:9200
</pre></div>
</div>
<p>You should get something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="n">status</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="s2">&quot;Amina Synge&quot;</span><span class="p">,</span>
    <span class="n">version</span><span class="p">:</span> <span class="p">{</span>
        <span class="n">number</span><span class="p">:</span> <span class="s2">&quot;1.3.8&quot;</span><span class="p">,</span>
        <span class="n">build_hash</span><span class="p">:</span> <span class="s2">&quot;475733ee0837fba18c00c3ee76cd49a08755550c&quot;</span><span class="p">,</span>
        <span class="n">build_timestamp</span><span class="p">:</span> <span class="s2">&quot;2015-02-11T14:45:42Z&quot;</span><span class="p">,</span>
        <span class="n">build_snapshot</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="n">lucene_version</span><span class="p">:</span> <span class="s2">&quot;4.9&quot;</span>
    <span class="p">},</span>
    <span class="n">tagline</span><span class="p">:</span> <span class="s2">&quot;You Know, for Search&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="index-the-data-available-at-rtd-database">
<h2>Index the data available at RTD database<a class="headerlink" href="#index-the-data-available-at-rtd-database" title="Permalink to this headline">¶</a></h2>
<p>You need to create the indexes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python manage.py provision_elasticsearch
</pre></div>
</div>
<p>In order to search through the RTD database, you need to index it into the elasticsearch index:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python manage.py reindex_elasticsearch
</pre></div>
</div>
<p>You are ready to go!</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="local_rtd_vm.html" class="btn btn-neutral float-right" title="Local VM Install" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="customization.html" class="btn btn-neutral" title="Customizing your install" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2010-2018, Read the Docs, Inc &amp; contributors.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0',
            LANGUAGE:'en',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>