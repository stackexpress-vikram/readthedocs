

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>YAML Configuration File &mdash; Read the Docs 1.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/logo.svg" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">User Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../versions.html">Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../builds.html">Build Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features.html">Read the Docs features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support.html">Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../yaml-config.html">Read the Docs YAML Config</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guides/index.html">Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">Public API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../embed.html">Embed API</a></li>
</ul>
<p class="caption"><span class="caption-text">About Read the Docs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contribute.html">Contributing to Read the Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../team.html">Read the Docs Team</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gsoc.html">Google Summer of Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../code-of-conduct.html">Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../privacy-policy.html">Privacy Policy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advertising/index.html">Advertising</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sponsors.html">Sponsors of Read the Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../open-source-philosophy.html">Read the Docs Open Source Philosophy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../story.html">The Story of Read the Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../abandoned-projects.html">Policy for Abandoned Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dmca/index.html">DMCA Takedown Policy</a></li>
</ul>
<p class="caption"><span class="caption-text">Feature Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../webhooks.html">Webhooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../badges.html">Badges</a></li>
<li class="toctree-l1"><a class="reference internal" href="../alternate_domains.html">Alternate Domains</a></li>
<li class="toctree-l1"><a class="reference internal" href="../localization.html">Localization of Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vcs.html">Version Control System Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../subprojects.html">Subprojects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../conda.html">Conda Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../canonical.html">Canonical URLs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../single_version.html">Single Version Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../privacy.html">Privacy Levels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user-defined-redirects.html">User-defined Redirects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../automatic-redirects.html">Automatic Redirects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features/embed.html">Content Embedding</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tests.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docs.html">Building and Contributing to Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/standards.html">Front End Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/buildenvironments.html">Build Environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../symlinks.html">How we use symlinks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../settings.html">Interesting Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../i18n.html">Internationalization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../issue-labels.html">Overview of issue labels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">Security</a></li>
</ul>
<p class="caption"><span class="caption-text">Business Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../business/index.html">Read the Docs Business Features</a></li>
</ul>
<p class="caption"><span class="caption-text">Custom Install Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../custom_installs/index.html">Info about custom installs</a></li>
</ul>
<p class="caption"><span class="caption-text">Designer Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../design.html">Designing Read the Docs</a></li>
<li class="toctree-l1"><a class="reference external" href="https://sphinx-rtd-theme.readthedocs.io/en/latest/">Theme</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Read the Docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>YAML Configuration File</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/design/yaml-file.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="yaml-configuration-file">
<h1>YAML Configuration File<a class="headerlink" href="#yaml-configuration-file" title="Permalink to this headline">¶</a></h1>
<div class="section" id="backgroud">
<h2>Backgroud<a class="headerlink" href="#backgroud" title="Permalink to this headline">¶</a></h2>
<p>The current YAML configuration file is in beta state.
There are many options and features that it doesn’t support yet.
This document will serve as a design document for discuss how to implement the missing features.</p>
</div>
<div class="section" id="scope">
<h2>Scope<a class="headerlink" href="#scope" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Finish the spec to include all the missing options</li>
<li>Have consistency around the spec</li>
<li>Proper documentation for the end user</li>
<li>Allow to specify the spec’s version used on the YAML file</li>
<li>Collect/show metadata about the YAML file and build configuration</li>
<li>Promote the adoption of the configuration file</li>
</ul>
</div>
<div class="section" id="rtd-settings">
<h2>RTD settings<a class="headerlink" href="#rtd-settings" title="Permalink to this headline">¶</a></h2>
<p>No all the RTD settings are applicable to the YAML file,
others are applicable for each build (or version),
and others for the global project.</p>
<div class="section" id="not-applicable-settings">
<h3>Not applicable settings<a class="headerlink" href="#not-applicable-settings" title="Permalink to this headline">¶</a></h3>
<p>Those settings can’t be on the YAML file because:
may depend for the initial project setup,
are planned to be removed,
security and privacy reasons.</p>
<ul class="simple">
<li>Project Name</li>
<li>Repo URL</li>
<li>Repo type</li>
<li>Privacy level (this feature is planned to be removed <a class="footnote-reference" href="#privacy-level" id="id1">[1]</a>)</li>
<li>Project description (this feature is planned to be removed <a class="footnote-reference" href="#project-description" id="id2">[2]</a>)</li>
<li>Single version</li>
<li>Default branch</li>
<li>Default version</li>
<li>Domains</li>
<li>Active versions</li>
<li>Translations</li>
<li>Subprojects</li>
<li>Integrations</li>
<li>Notifications</li>
<li>Language</li>
<li>Programming Language</li>
<li>Project homepage</li>
<li>Tags</li>
<li>Analytics code</li>
<li>Global redirects</li>
</ul>
</div>
<div class="section" id="global-settings">
<h3>Global settings<a class="headerlink" href="#global-settings" title="Permalink to this headline">¶</a></h3>
<p>To keep consistency with the per-version settings and avoid confusion,
this settings will not be stored in the YAML file and will be stored in the database only.</p>
</div>
<div class="section" id="local-settings">
<h3>Local settings<a class="headerlink" href="#local-settings" title="Permalink to this headline">¶</a></h3>
<p>Those configurations will be read from the YAML file in the current version that is being built.</p>
<p>Several settings are already implemented and documented on
<a class="reference external" href="https://docs.readthedocs.io/en/latest/yaml-config.html">https://docs.readthedocs.io/en/latest/yaml-config.html</a>.
So, they aren’t covered with much detail here.</p>
<ul class="simple">
<li>Documentation type</li>
<li>Project installation (virtual env, requirements file, sphinx configuration file, etc)</li>
<li>Additional builds (pdf, epub)</li>
<li>Python interpreter</li>
<li>Per-version redirects</li>
</ul>
</div>
</div>
<div class="section" id="configuration-file">
<h2>Configuration file<a class="headerlink" href="#configuration-file" title="Permalink to this headline">¶</a></h2>
<div class="section" id="format">
<h3>Format<a class="headerlink" href="#format" title="Permalink to this headline">¶</a></h3>
<p>The file format is based on the YAML spec 1.2 <a class="footnote-reference" href="#yaml-spec" id="id3">[3]</a>
(latest version on the time of this writing).</p>
<p>The file must be on the root directory of the repository, and must be named as:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">readthedocs.yml</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">readthedocs.yaml</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">.readthedocs.yml</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">.readthedocs.yaml</span></code></li>
</ul>
</div>
<div class="section" id="conventions">
<h3>Conventions<a class="headerlink" href="#conventions" title="Permalink to this headline">¶</a></h3>
<p>The spec of the configuration file must use this conventions.</p>
<ul class="simple">
<li>Use <code class="xref py py-obj docutils literal notranslate"><span class="pre">[]</span></code> to indicate an empty list</li>
<li>Use <code class="xref py py-obj docutils literal notranslate"><span class="pre">null</span></code> to indicate a null value</li>
<li>Use <a class="reference external" href="https://python.readthedocs.io/en/latest/library/functions.html#all" title="(in Python v3.7)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">all</span></code></a> (internal string keyword) to indicate that all options are included on a list with predetermined choices.</li>
<li>Use <code class="xref py py-obj docutils literal notranslate"><span class="pre">true</span></code>  and <code class="xref py py-obj docutils literal notranslate"><span class="pre">false</span></code> as only options on boolean fields</li>
</ul>
</div>
<div class="section" id="spec">
<h3>Spec<a class="headerlink" href="#spec" title="Permalink to this headline">¶</a></h3>
<p>The current spec is documented on <a class="reference external" href="https://docs.readthedocs.io/en/latest/yaml-config.html">https://docs.readthedocs.io/en/latest/yaml-config.html</a>.
It will be used as base for the future spec.
The spec will be written using a validation schema such as <a class="reference external" href="https://json-schema-everywhere.github.io/yaml">https://json-schema-everywhere.github.io/yaml</a>.</p>
</div>
</div>
<div class="section" id="versioning-the-spec">
<h2>Versioning the spec<a class="headerlink" href="#versioning-the-spec" title="Permalink to this headline">¶</a></h2>
<p>The version of the spec that the user wants to use will be specified on the YAML file.
The spec only will have mayor versions (1.0, not 1.2) <a class="footnote-reference" href="#specversioning" id="id4">[4]</a>.
For keeping compatibility with older projects using a configuration file without a version,
the latest compatible version will be used (1.0).</p>
</div>
<div class="section" id="adoption-of-the-configuration-file">
<h2>Adoption of the configuration file<a class="headerlink" href="#adoption-of-the-configuration-file" title="Permalink to this headline">¶</a></h2>
<p>When a user creates a new project or it’s on the settings page,
we could suggest her/him an example of a functional configuration file with a minimal setup.
And making clear where to put global configurations.</p>
<p>For users that already have a project,
we can suggest him/her a configuration file on each build based on the current settings.</p>
</div>
<div class="section" id="configuration-file-and-database">
<h2>Configuration file and database<a class="headerlink" href="#configuration-file-and-database" title="Permalink to this headline">¶</a></h2>
<p>The settings used in the build from the configuration file
(and other metadata) needs to be stored in the database,
this is for later usage only, not to populate existing fields.</p>
</div>
<div class="section" id="the-build-process">
<h2>The build process<a class="headerlink" href="#the-build-process" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>The repository is updated</li>
<li>Checkout to the current version</li>
<li>Retrieve the settings from the database</li>
<li>Try to parse the YAML file (the build fails if there is an error)</li>
<li>Merge the both settings (YAML file and database)</li>
<li>The version is built according to the settings</li>
<li>The settings used to build the documentation can be seen by the user</li>
</ul>
</div>
<div class="section" id="dependencies">
<h2>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h2>
<p>Current repository which contains the code related to the configuration file:
<a class="reference external" href="https://github.com/rtfd/readthedocs-build">https://github.com/rtfd/readthedocs-build</a></p>
</div>
<div class="section" id="footnotes">
<h2>Footnotes<a class="headerlink" href="#footnotes" title="Permalink to this headline">¶</a></h2>
<table class="docutils footnote" frame="void" id="privacy-level" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td><a class="reference external" href="https://github.com/rtfd/readthedocs.org/issues/2663">https://github.com/rtfd/readthedocs.org/issues/2663</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="project-description" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[2]</a></td><td><a class="reference external" href="https://github.com/rtfd/readthedocs.org/issues/3689">https://github.com/rtfd/readthedocs.org/issues/3689</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="yaml-spec" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3">[3]</a></td><td><a class="reference external" href="http://yaml.org/spec/1.2/spec.html">http://yaml.org/spec/1.2/spec.html</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="specversioning" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id4">[4]</a></td><td><a class="reference external" href="https://github.com/rtfd/readthedocs.org/issues/3806">https://github.com/rtfd/readthedocs.org/issues/3806</a></td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="one-checkout" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[5]</td><td><a class="reference external" href="https://github.com/rtfd/readthedocs.org/issues/1375">https://github.com/rtfd/readthedocs.org/issues/1375</a></td></tr>
</tbody>
</table>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2010-2018, Read the Docs, Inc &amp; contributors.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0',
            LANGUAGE:'en',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>